{% extends "layouts/base-fullscreen.html" %}

{% block title %} Нэвтрэх {% endblock %}

{% block content %}   

    <div class="auth-wrapper">
        <div class="auth-content">
            <div class="auth-bg">
                <span class="r"></span>
                <span class="r s"></span>
                <span class="r s"></span>
                <span class="r"></span>
            </div>
            <div class="card">
                <div class="card-body text-center">

                    <h3 class="mb-4">Нэвтрэх</h3>

                    <span class="mb-0 text-muted">
                        {% if msg %}
                            <span class="text-danger">{{ msg | safe }}</span>
                        {% else %}
                            Мэдээллээ оруулнуу
                        {% endif %} 
                    </span>

                    <br />
                    <br />

                    <form role="form" method="post" id="login-form" action="">

                        {{ form.hidden_tag() }}                    

                        <div class="input-group mb-3">
                            {{ form.username(placeholder="Имэйл", class="form-control") }}
                        </div>
                        
                        <div class="input-group mb-4">
                            {{ form.password(placeholder="Нууц үг", class="form-control", type="password") }}
                        </div>
                        
                        <button type="submit" name="login" class="btn btn-primary shadow-2 mb-4">Нэвтрэх</button>

                        <script>
                            document.getElementById('login-form').addEventListener
                            ('submit', function(event)
                                {
                                    const emailInput = document.getElementById('email').value.trim();
                                    const passwordInput = document.getElementById('password').value.trim();

                                    // Validate email and password
                                if (emailInput === '' || passwordInput === '') {
                                    alert('Нэр нууц үг дээр зай авахаас сэргийл.');
                                    event.preventDefault(); // Prevent form submission

                                }

                                // Perform additional validation if needed (e.g., email format)

                                // Submit the form if validation passes
                                // Otherwise, prevent form submission
                                }
                            );
                        </script>

                    </form>

                    <p class="mb-0 text-muted">Бүртгүүлж байгаагүй? <a href="{{ url_for('authentication_blueprint.register') }}" >Бүртгүүлэх</a></p>
                    
                    {% if config.SOCIAL_AUTH_GITHUB %}
                        <div class="mx-2">

                            <a href="{{url_for('authentication_blueprint.login_github')}}" class="btn">
                                <i class="feather icon-github auth-icon"></i>
                                
                            </a>
                            <br />
                            <span class="mx-2">GitHub-аар нэвтрэх</span>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

{% endblock content %}
